<%= render(:partial => 'groups/menu')%>

<h3>Members of: <%= @group.name %></h3>

<table class="listtable">
<tr><th><input type="checkbox" name="markall" class="cammark" title="mark all" value="1" onclick="markall()" /></th><th>Name</th><th>Active</th><th>Sub-groups / tags</th></tr>	
<% for member in @group.active_members -%>
<tr>
	<td><input type="checkbox" name="mark[]" class="cammark" title="mark" value="<%= member.id %>" /></td>
	<td><a href="/participant/<%= member.id %>/profile"><%= member.name %></a></td>
	<td><%= member.group_participants[0].active ? "yes" : "no" %></td>
	<td><%= member.group_participants[0].subtags %></td>
</tr>
<% end -%>
</table>

<p>Tag selected as sub-group
	<%= select_tag :group_subtag_id, [['',0]]+GroupSubtag.where(:group_id=>@group.id).collect {|p| [ raw("#{p.tag}"), p.id ] } %>
</p>

<script>
var allmarked = false;
function markall() {
	var marks = $('input.cammark');
	for (var x=0;x<marks.length;x++) {
		var mark = marks[x];
		if (allmarked) {
			mark.checked = false;
		} else {
			mark.checked = true;
		}	
	}
	if (allmarked) {
		allmarked = false;
	} else {
		allmarked = true;
	}
}
</script>